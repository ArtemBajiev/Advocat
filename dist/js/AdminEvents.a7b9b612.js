"use strict";(self["webpackChunkadvocate"]=self["webpackChunkadvocate"]||[]).push([[17],{6565:function(t,e,a){var i=a(1076);const n=i.Z.create({baseURL:"https://api.sudural.ru/api"});n.interceptors.request.use((t=>(t.headers.Authorization=`Bearer ${localStorage.getItem("userAccesKey")}`,t))),e["Z"]=n},778:function(t,e,a){a.d(e,{Z:function(){return v}});var i=a(3396),n=a(9242),s=a(7139),l=a(466);const d={class:"admin--menu"},o=(0,i._)("img",{width:"20",src:l,alt:""},null,-1),r=[o],m={class:"admin--menu__list"},u={class:"admin-menu__list-item"},p={class:"admin-menu__list-item"},c={class:"admin-menu__list-item"};function _(t,e,a,l,o,_){const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{class:"btn-admin-menu",onClick:e[0]||(e[0]=t=>o.adminMenu=!0)},"Меню"),(0,i.Wm)(n.uT,{name:"btn-admin-menu",mode:"out-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("nav",d,[(0,i._)("button",{class:"btn-admin-menu-close",onClick:e[1]||(e[1]=t=>o.adminMenu=!1)},r),(0,i._)("ul",m,[(0,i._)("li",u,[(0,i.Wm)(h,{to:"/adminMain"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Главная ")])),_:1})]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.$store.state.receivedData.advocatsInfo,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"admin-menu__list-item",key:t.id},[(0,i.Wm)(h,{to:{name:"AdminLawyer",params:{id:t.id}}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.name.rus),1)])),_:2},1032,["to"])])))),128)),(0,i._)("li",p,[(0,i.Wm)(h,{to:"/AdminLegalCenter"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Научно-Правовой центр ")])),_:1})]),(0,i._)("li",c,[(0,i.Wm)(h,{to:"/AdminEvents"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Мероприятия ")])),_:1})])])],512),[[n.F8,o.adminMenu]])])),_:1})],64)}var h={data(){return{adminMenu:!1}}},f=a(89);const g=(0,f.Z)(h,[["render",_]]);var v=g},9877:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var i=a(3396),n=a(9242);const s=t=>((0,i.dD)("data-v-d8aa624a"),t=t(),(0,i.Cn)(),t),l={class:"container"},d={class:"Admin__slider"},o=["href"],r=["src"],m=["onClick"],u={class:"Admin__slide-item Admin__slide-item-form"},p={for:""},c={for:""},_={for:""},h={for:""},f=s((()=>(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Добавить",-1))),g={class:"admin__event__cards"},v=["onClick"];function w(t,e,a,s,w,$){const D=(0,i.up)("HeaderSlot"),U=(0,i.up)("AdminMenu"),b=(0,i.up)("EventCard"),k=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(D),(0,i.Wm)(U),(0,i._)("section",null,[(0,i._)("div",l,[(0,i._)("ul",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.slideEventsData.slice().reverse(),(e=>((0,i.wg)(),(0,i.iD)("li",{class:"Admin__slide-item",key:e.id},[(0,i._)("a",{href:`${t.$store.state.URL__DATA}${e.pdf}`},[(0,i._)("img",{width:"300",src:`${t.$store.state.URL__DATA}${e.img}`,alt:""},null,8,r)],8,o),(0,i._)("button",{class:"btn admin__slide__del-btn",onClick:t=>$.delSlide(e.id)},null,8,m)])))),128)),(0,i._)("li",u,[(0,i._)("form",{ref:"formEvent",onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>$.uploadFiles&&$.uploadFiles(...t)),["prevent"]))},[(0,i._)("label",p,[(0,i.Uk)("Выберите картинку "),(0,i._)("input",{onChange:e[0]||(e[0]=(...t)=>$.loadImg&&$.loadImg(...t)),type:"file"},null,32)]),(0,i._)("label",c,[(0,i.Uk)("Выберите файл pdf "),(0,i._)("input",{onChange:e[1]||(e[1]=(...t)=>$.loadPdf&&$.loadPdf(...t)),type:"file"},null,32)]),(0,i._)("label",_,[(0,i.Uk)("rus "),(0,i.wy)((0,i._)("input",{id:"",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>w.newSlide.text.rus=t),cols:"30",rows:"10"},null,512),[[n.nr,w.newSlide.text.rus]])]),(0,i._)("label",h,[(0,i.Uk)("eng "),(0,i.wy)((0,i._)("input",{name:"",type:"text",id:"","onUpdate:modelValue":e[3]||(e[3]=t=>w.newSlide.text.eng=t),cols:"30",rows:"10"},null,512),[[n.nr,w.newSlide.text.eng]])]),f],544)])]),(0,i._)("ul",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.lawyerEventsData.slice().reverse(),(t=>((0,i.wg)(),(0,i.iD)("li",{class:"admin-event__item",key:t.id},[(0,i.Wm)(k,{to:{name:"AdminEventsItem",params:{id:t.id}}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{item:t},null,8,["item"])])),_:2},1032,["to"]),(0,i._)("button",{class:"btn btn-del-event",onClick:(0,n.iM)((e=>$.delEvent(t.id)),["prevent"])},null,8,v)])))),128)),(0,i._)("button",{class:"btn admin-event__item add-events",onClick:e[5]||(e[5]=(0,n.iM)((t=>$.addEvent()),["prevent"]))}," + ")])])])],64)}var $=a(1178),D=a(778),U=a(3384),b=a(6565),k={components:{HeaderSlot:$.Z,AdminMenu:D.Z,EventCard:U.Z},data(){return{newSlide:{img:"",pdf:"",text:{rus:"",eng:""}}}},computed:{lawyerEventsData(){return this.$store.state.receivedData.lawyerEvents},slideEventsData(){return this.$store.state.receivedData.slideEvents}},mounted(){},methods:{loadImg(t){"jpg"===t.target.files[0].name.split(".").pop()||"png"===t.target.files[0].name.split(".").pop()||"jpeg"===t.target.files[0].name.split(".").pop()?this.newSlide.img=t.target.files[0]:(this.$refs.formEvent.reset(),alert("Неверный формат файла"))},loadPdf(t){"pdf"===t.target.files[0].name.split(".").pop()||"pptx"===t.target.files[0].name.split(".").pop()?this.newSlide.pdf=t.target.files[0]:(this.$refs.formEvent.reset(),alert("Неверный формат файла"))},uploadFiles(){const t=new FormData;t.append("filePdf",this.newSlide.pdf),t.append("fileImg",this.newSlide.img),t.append("text",JSON.stringify(this.newSlide.text)),t.append("lastId",this.slideEventsData.length),this.$store.commit("loadingUpdate",!0),b.Z.post(`${this.$store.state.URL__DATA}api/add/slide`,t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{alert("Файл успешно загружен:"),this.$refs.formEvent.reset(),this.$store.dispatch("GetData"),this.$store.commit("loadingUpdate",!1)})).catch((t=>{this.$store.commit("loadingUpdate",!1),alert("Ошибка при загрузке файла:",t)}))},addEvent(){this.$store.commit("loadingUpdate",!0),b.Z.post(`${this.$store.state.URL__DATA}api/add/lawyer/event`,{lastId:this.lawyerEventsData.length>0?this.lawyerEventsData[this.lawyerEventsData.length-1].id:1}).then((()=>{alert("Добавлен"),this.$store.dispatch("GetData"),this.$store.commit("loadingUpdate",!1)})).catch((t=>{alert("Ошибка",t),this.$store.commit("loadingUpdate",!1)}))},delSlide(t){if(this.$store.commit("loadingUpdate",!0),window.confirm("Подтвердите удаление")){const e=new FormData;e.append("id",t),b.Z.post(`${this.$store.state.URL__DATA}api/delete/slide`,e).then((()=>{this.$store.dispatch("GetData"),this.$store.commit("loadingUpdate",!1)})).catch((t=>{alert("Ошибка:",t),this.$store.commit("loadingUpdate",!1)}))}},delEvent(t){this.$store.commit("loadingUpdate",!0),window.confirm("Подтвердите удаление")&&b.Z.post(`${this.$store.state.URL__DATA}api/delete/lawyer/event`,{id:t}).then((()=>{alert("Удалён"),this.$store.dispatch("GetData"),this.$store.commit("loadingUpdate",!1)})).catch((t=>{alert("Ошибка",t),this.$store.commit("loadingUpdate",!1)}))}}},y=a(89);const A=(0,y.Z)(k,[["render",w],["__scopeId","data-v-d8aa624a"]]);var E=A}}]);
//# sourceMappingURL=AdminEvents.a7b9b612.js.map